/* ----------------
   Global / typography
   ---------------- */
   :root{
    --max-w: 900px;
    --side-pad: clamp(16px, 4vw, 40px);
  
    /* light theme */
    --accent: #4b5;
    --ink: #1b1b1b;
    --ink-faint: #606060;
    --bg: #fafaf8;
    --box: #f0efe9;
  
    /* callout colors (light) */
    --def-color: #2b8f6b;    /* Definition */
    --thm-color: #2b6fbf;    /* Theorem */
    --lem-color: #b36b2b;    /* Lemma */
    --prop-color: #9b5b9b;   /* Proposition */
    --cor-color: #c04b35;    /* Corollary */
  }
  
  /* dark theme overrides */
  html[data-theme="dark"]{
    --accent: #89d3a6;
    --ink: #eaeaea;
    --ink-faint: #b6b6b6;
    --bg: #0e0f10;
    --box: #161718;
  
    --def-color: #5fd0a0;
    --thm-color: #7db7ff;
    --lem-color: #ffb87a;
    --prop-color: #d3a3ff;
    --cor-color: #ff9580;
  }
  
  html,body{
    height:100%;
    margin:0;
    padding:0;
    background:var(--bg);
    color:var(--ink);
    font-family: "EB Garamond", Garamond, "Times New Roman", serif;
    line-height:1.55;
    font-size:18px;
  }
  
  /* ----------------
     Header & spacing
     ---------------- */
  .site-header {
    max-width: var(--max-w);
    margin: 0 auto;
    padding: 3.2rem var(--side-pad) 1.25rem; /* extra top space above title */
  }
  .site-head-inner {
    display:flex;
    align-items:flex-start;
    justify-content:space-between;
    gap:1rem;
  }
  .title-block h1 {
    margin:0 0 .3rem;
    font-size: clamp(2rem, 3vw, 2.4rem);
    font-weight:600;
  }
  .subtitle {
    margin:0;
    color:var(--ink-faint);
    font-style:italic;
  }
  .controls { display:flex; align-items:center; gap:.5rem; }
  
  /* theme toggle */
  #themeToggle {
    background: color-mix(in oklab, var(--box) 85%, transparent);
    border: 1px solid color-mix(in oklab, var(--ink) 18%, transparent);
    padding: .35rem .6rem;
    border-radius:8px;
    cursor:pointer;
    font-size:1.05rem;
  }
  
  /* ----------------
     Content area & typography
     ---------------- */
  #app { width:100%; }
  #content {
    max-width: var(--max-w);
    margin: 0 auto;
    padding: 1rem var(--side-pad) 3rem;
    background: transparent;
  }
  #content h1,#content h2,#content h3,#content h4 {
    margin-top:2rem;
    margin-bottom:.8rem;
    line-height:1.2;
  }
  #content h1 { font-size: clamp(1.9rem, 2.4vw, 2.2rem); border-bottom:1px solid color-mix(in oklab, var(--ink) 20%, transparent); padding-bottom:.4rem; }
  #content h2 { font-size: clamp(1.45rem, 1.9vw, 1.7rem); }
  #content p, #content li { font-size: 1rem; }
  
  /* ----------------
     Callouts (Definition/Theorem/etc.)
     ---------------- */
  .callout {
    border-left: 3px solid var(--accent);
    background: var(--box);
    padding: .85rem 1rem;
    border-radius: 6px;
    margin: 1rem 0;
  }
  .callout .label { font-variant: small-caps; color:var(--ink-faint); font-weight:700; }
  .callout.definition  { border-left-color: var(--def-color); }
  .callout.theorem     { border-left-color: var(--thm-color); }
  .callout.lemma       { border-left-color: var(--lem-color); }
  .callout.proposition { border-left-color: var(--prop-color); }
  .callout.corollary   { border-left-color: var(--cor-color); }
  
  /* ----------------
     Collapsibles (animated)
     ---------------- */
  .collapsible {
    border: 1px solid color-mix(in oklab, var(--ink) 18%, transparent);
    border-radius:8px;
    background: color-mix(in oklab, var(--box) 80%, transparent);
    margin: 1rem 0;
    overflow:clip;
  }
  .collapsible summary {
    cursor:pointer;
    list-style:none;
    padding:.75rem 1rem;
    display:flex;
    align-items:center;
    gap:.5rem;
    font-weight:700;
  }
  .collapsible summary::-webkit-details-marker { display:none; }
  .collapsible summary::before {
    content: "â–¸";
    transition: transform .22s ease;
    color: var(--accent);
  }
  .collapsible[open] > summary::before { transform: rotate(90deg); }
  
  /* inner wrapper we animate */
  .collapsible__content {
    block-size:0;
    overflow:clip;
    transition: block-size .28s ease, padding .22s ease;
    padding-inline:1rem;
  }
  .collapsible[open] .collapsible__content { padding-block-end:.75rem; }
  
  /* nested */
  .collapsible .collapsible { margin-left:1rem; }
  
  /* ----------------
     Lists, code, pre
     ---------------- */
  ol.alpha { list-style-type: lower-alpha; }
  ol.roman { list-style-type: lower-roman; }
  ol.ARABIC { list-style-type: decimal; }
  
  pre, code {
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
    background: color-mix(in oklab, var(--box) 85%, transparent);
    border-radius:6px;
  }
  pre { padding:.8rem; overflow:auto; }
  
  /* ----------------
     TOC (pills)
     ---------------- */
  #toc {
    max-width: var(--max-w);
    margin: 0 auto;
    padding: .5rem var(--side-pad) 0;
  }
  #toc .toc-list {
    display:flex;
    flex-wrap:wrap;
    gap:.5rem .9rem;
    padding:.4rem 0 1rem;
  }
  #toc .toc-list a {
    display:inline-block;
    padding:.25rem .7rem;
    border-radius:6px;
    background: color-mix(in oklab, var(--box) 80%, transparent);
    color:inherit;
    text-decoration:none; /* important: remove underline */
    border:1px solid color-mix(in oklab, var(--ink) 15%, transparent);
    transition: background .15s ease, color .15s ease;
  }
  #toc .toc-list a:hover {
    background: var(--accent);
    color: #fff;
  }
  
  /* footer */
  .site-footer {
    max-width: var(--max-w);
    margin: 0 auto;
    padding: 1rem var(--side-pad);
    color: var(--ink-faint);
    font-size: .9rem;
  }
  