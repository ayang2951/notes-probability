:root{
    --max-w: 900px;          /* comfortable reading width */
    --side-pad: clamp(16px, 4vw, 40px);
    --gutter: 1.25rem;
    --accent: #4b5;          /* gentle green accent */
    --ink: #1b1b1b;
    --ink-faint: #606060;
    --bg: #fafaf8;
    --box: #f0efe9;
  }
  
  @media (prefers-color-scheme: dark) {
    :root{
      --accent: #89d3a6;
      --ink: #eaeaea;
      --ink-faint: #b6b6b6;
      --bg: #111213;
      --box: #1b1c1d;
    }
  }
  
  html, body {
    margin: 0;
    padding: 0;
    background: var(--bg);
    color: var(--ink);
    font-family: "EB Garamond", Garamond, "Times New Roman", serif;
    line-height: 1.55;
    font-size: 18px;
  }
  
  .site-header, .site-footer {
    max-width: var(--max-w);
    margin: 0 auto;
    padding: 1.25rem var(--side-pad);
  }
  
  .site-header h1 {
    font-weight: 600;
    letter-spacing: 0.2px;
    margin: 0 0 .25rem;
  }
  
  .subtitle {
    margin: 0;
    color: var(--ink-faint);
    font-style: italic;
  }
  
  #app {
    display: grid;
    grid-template-columns: minmax(0, 1fr);
  }
  
  #content {
    max-width: var(--max-w);
    margin: 0 auto;
    padding: 1rem var(--side-pad) 3rem;
    background: transparent;
  }
  
  /* Comfy margins + readable typography */
  #content h1, #content h2, #content h3, #content h4 {
    margin-top: 2rem;
    margin-bottom: .8rem;
    line-height: 1.2;
  }
  #content h1 { font-size: clamp(1.9rem, 2.4vw, 2.3rem); border-bottom: 1px solid color-mix(in oklab, var(--ink) 20%, transparent); padding-bottom: .4rem;}
  #content h2 { font-size: clamp(1.5rem, 2vw, 1.7rem); }
  #content h3 { font-size: clamp(1.25rem, 1.6vw, 1.35rem); }
  #content p, #content li { font-size: 1rem; }
  
  /* Gentle box for definitions, theorems, etc. */
  .callout {
    background: var(--box);
    border-left: 3px solid var(--accent);
    padding: .85rem 1rem;
    border-radius: 6px;
    margin: 1rem 0;
  }
  .callout .label { font-variant: small-caps; color: var(--ink-faint); }
  
  /* Collapsibles (animated) */
  .collapsible {
    border: 1px solid color-mix(in oklab, var(--ink) 18%, transparent);
    border-radius: 8px;
    background: color-mix(in oklab, var(--box) 80%, transparent);
    margin: 1rem 0;
    overflow: clip;
  }
  .collapsible summary {
    cursor: pointer;
    list-style: none;
    padding: .75rem 1rem;
    display: flex; align-items: center; gap: .5rem;
    font-weight: 600;
    position: relative;
  }
  .collapsible summary::-webkit-details-marker { display:none; }
  .collapsible summary::before {
    content: "â–¸";
    transition: transform .25s ease;
    color: var(--accent);
  }
  .collapsible[open] > summary::before { transform: rotate(90deg); }
  
  /* Smooth open/close using a wrapper we animate */
  .collapsible__content {
    block-size: 0;
    overflow: clip;
    transition: block-size .28s ease;
    padding-inline: 1rem;
  }
  .collapsible[open] .collapsible__content {
    /* final size gets set inline via JS to the scrollHeight; we still keep padding for interior */
    padding-block-end: .75rem;
  }
  
  /* Nested sub-proof indentation */
  .collapsible .collapsible {
    margin-left: 1rem;
  }
  
  /* Lists with different numbering (examples) */
  ol.alpha { list-style-type: lower-alpha; }
  ol.roman { list-style-type: lower-roman; }
  ol.ARABIC { list-style-type: decimal; }
  
  /* Code blocks */
  pre, code {
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
    background: color-mix(in oklab, var(--box) 85%, transparent);
  }
  pre {
    padding: .8rem; border-radius: 6px; overflow: auto;
  }
  
  /* TOC (optional, auto-injected) */
  #toc {
    max-width: var(--max-w);
    margin: 0 auto;
    padding: .5rem var(--side-pad) 0;
  }
  #toc a { color: inherit; text-decoration: none; }
  #toc .toc-list { display:flex; flex-wrap: wrap; gap:.5rem .9rem; padding: .4rem 0 1rem; }
  #toc .toc-list a { padding:.2rem .45rem; border-radius:5px; background: color-mix(in oklab, var(--box) 80%, transparent); }
  